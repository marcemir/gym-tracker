<!DOCTYPE html>
<html lang="es" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gym Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Hide number input spinners */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
          -webkit-appearance: none; 
          margin: 0; 
        }
        input[type=number] {
          -moz-appearance: textfield;
        }
        .view {
            display: none;
        }
        .view.active {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        #splash-screen.fade-out {
            opacity: 0;
            transition: opacity 0.5s ease-out;
        }
        h2:focus, h3:focus {
            outline: none;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 antialiased">

    <!-- Splash Screen -->
    <div id="splash-screen" class="fixed inset-0 bg-gray-900 flex flex-col justify-center items-center z-50 bg-cover bg-center" style="background-image: linear-gradient(rgba(16, 16, 16, 0.8), rgba(16, 16, 16, 0.9)), url('https://images.unsplash.com/photo-1581009137042-c552e485697a?q=80&w=2070&auto=format&fit=crop');">
        <h1 class="text-5xl md:text-7xl font-black text-white tracking-wider">GymTracker</h1>
        <p class="text-yellow-400 mt-2">Tu compañero de entrenamiento</p>
    </div>

    <div id="app" class="max-w-3xl mx-auto p-4 md:p-6 min-h-screen">
        
        <!-- Main Content -->
        <main>
            <!-- Routines View -->
            <div id="routines-view" class="view active">
                <div class="rounded-2xl p-8 md:p-12 mb-8 flex flex-col justify-center items-center text-center bg-cover bg-center" style="background-image: linear-gradient(rgba(16, 16, 16, 0.7), rgba(16, 16, 16, 0.8)), url('https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?q=80&w=2070&auto=format&fit=crop');">
                    <h2 class="text-4xl md:text-5xl font-black text-white tracking-wide" tabindex="-1">Elige tu Reto</h2>
                    <p class="text-gray-300 mt-2 max-w-md">Selecciona una rutina para empezar o crea una nueva para conquistar tus metas.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-5" id="routines-list">
                    <!-- Routine cards will be injected here -->
                </div>
                <div id="no-routines-message" class="text-center py-10 px-4 bg-gray-800 rounded-2xl mt-4 hidden">
                    <p class="text-gray-300">No hay rutinas todavía. ¡Crea una para empezar!</p>
                </div>
                <div class="mt-8 flex justify-center items-center">
                    <button id="export-csv-btn" class="py-2 px-4 text-sm font-semibold rounded-lg border-2 border-yellow-400 text-yellow-400 hover:bg-yellow-400 hover:text-gray-900 transition-all duration-300">Exportar Historial</button>
                </div>
            </div>

            <!-- Create/Edit Routine View (Unified Form) -->
            <div id="routine-form-view" class="view">
                <div class="bg-gray-800 p-6 md:p-8 rounded-2xl">
                    <h2 id="routine-form-title" class="text-3xl font-bold mb-6 tracking-wide text-white" tabindex="-1">Crear Nueva Rutina</h2>
                    <div class="space-y-6">
                        <input type="text" id="routine-name-input" placeholder="Nombre" class="w-full p-4 rounded-lg bg-gray-700 border-2 border-gray-600 focus:ring-2 focus:ring-yellow-400 focus:border-transparent text-white text-lg">
                        <div>
                            <h3 class="font-semibold text-lg mb-3">Ejercicios</h3>
                            <div class="flex items-center space-x-2 text-xs text-gray-400 uppercase font-bold tracking-wider mb-2 px-1">
                                <span class="flex-grow">Ejercicio</span>
                                <span class="w-20 text-center">Series</span>
                                <span class="w-8"></span> <!-- Spacer for delete button -->
                            </div>
                            <div id="exercises-container" class="space-y-3">
                                <!-- Dynamic exercise inputs will be here -->
                            </div>
                        </div>
                        <button id="add-exercise-btn" class="w-full py-3 px-4 text-sm font-semibold rounded-lg border-2 border-dashed border-gray-600 text-gray-400 hover:border-yellow-400 hover:text-yellow-400 transition-all">Añadir Ejercicio</button>
                    </div>
                    <div class="mt-8 flex justify-end space-x-3">
                        <button id="cancel-routine-btn" class="py-3 px-6 font-bold text-gray-400 rounded-lg hover:text-white transition-colors">Cancelar</button>
                        <button id="save-routine-btn" class="py-3 px-6 font-bold rounded-lg text-gray-900 bg-yellow-400 hover:bg-yellow-300 transition-colors">Guardar Rutina</button>
                    </div>
                </div>
            </div>

            <!-- Workout Session View -->
            <div id="workout-session-view" class="view">
                <div id="session-info" class="mb-6 text-center">
                    <h2 id="session-routine-name" class="text-3xl font-extrabold tracking-wide" tabindex="-1"></h2>
                    <p id="session-date" class="text-sm text-gray-400"></p>
                </div>
                <div id="session-exercises-container" class="space-y-6">
                    <!-- Workout exercise cards will be injected here -->
                </div>
                <div class="sticky bottom-0 bg-gray-900/80 backdrop-blur-sm py-4 mt-8 flex justify-between gap-4">
                    <button id="cancel-workout-btn" class="w-full py-4 font-bold rounded-lg text-gray-400 border-2 border-gray-700 hover:border-gray-500 hover:text-white transition-all">Cancelar</button>
                    <button id="finish-workout-btn" class="w-full py-4 font-bold rounded-lg text-gray-900 bg-yellow-400 hover:bg-yellow-300 transition-all">Finalizar y Guardar</button>
                </div>
            </div>
        </main>
        
        <!-- Floating Action Button -->
        <button id="create-routine-fab" class="fixed bottom-6 right-6 w-16 h-16 rounded-full text-gray-900 bg-yellow-400 shadow-lg flex items-center justify-center transform hover:scale-110 transition-transform z-20">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
            </svg>
        </button>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmation-modal-container" class="fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-40 hidden">
        <div class="bg-gray-800 rounded-2xl p-8 max-w-sm w-full mx-4 shadow-xl text-center">
            <h3 id="confirmation-title" class="text-2xl font-bold text-white mb-2">¿Estás seguro?</h3>
            <p id="confirmation-message" class="text-gray-300 mb-6">Esta acción no se puede deshacer.</p>
            <div class="flex justify-center gap-4">
                <button id="cancel-confirmation-btn" class="py-3 px-6 font-bold text-gray-400 rounded-lg hover:bg-gray-700 transition-colors">Cancelar</button>
                <button id="confirm-action-btn" class="py-3 px-6 font-bold rounded-lg text-white bg-red-600 hover:bg-red-700 transition-colors">Eliminar</button>
            </div>
        </div>
    </div>


    <script type="module" src="index.js"></script>
</body>
</html>